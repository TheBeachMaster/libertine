set -o errexit +o hashall

# Needs to track gcc version numbering
version 4.8.1
{
	depends musl
	
	source_package_alias gcc "${LFS_RECIPE_VERSION["${LFS_RECIPE_NAME}"]}"
}

function installPackage_crosscompiler_libstdc++()
{
	createBuildFolderAndPushd "gcc" "$LFS_RECIPE_VERSION"

		REALGCC="$LFS_TARGET"-gcc \
		CC="musl-gcc-external" \
		CXX="$LFS_TARGET"-g++ \
		CPPFLAGS="" \
		CFLAGS="-fPIC -Wall -Wno-error" \
		LDFLAGS="-Wl,-Bstatic -static-libgcc" \
		CXXFLAGS="" \
		AR="$LFS_TARGET"-ar \
		AS="$LFS_TARGET"-as \
		LD="$LFS_TARGET"-ld \
		NM="$LFS_TARGET"-nm \
		RANLIB="$LFS_TARGET"-ranlib \
		STRIP="$LFS_TARGET"-strip \
		OBJCOPY="$LFS_TARGET"-objcopy \
		OBJDUMP="$LFS_TARGET"-objdump \
		READELF="$LFS_TARGET"-readelf \
		../gcc/libstdc++-v3/configure \
		--host="$LFS_TARGET"                                      \
		--prefix="$LFS_DEPENDENCY_PREFIX_PATH"           \
		--disable-multilib                                     \
		--disable-shared                                       \
		--disable-nls                                          \
		--disable-libstdcxx-threads                            \
		--disable-libstdcxx-pch                                \
		--enable-version-specific-runtime-libs
		
		#--with-gxx-include-dir="$LFS_DEPENDENCY_PREFIX_PATH"/"$LFS_TARGET"/include/c++/"$LFS_RECIPE_VERSION"
	
		REALGCC="$LFS_TARGET"-gcc make
	
		REALGCC="$LFS_TARGET"-gcc make DESTDIR="$LFS" install
		
	popdBuildFolder
}
