set -o errexit +o hashall

version 1.21.1
{
	include busybox 1.21.1
	depends busybox-suid

	install_system_binaries_in_paths sbin
}

function install_crosscompiler_busybox-sbin()
{
	function package_crosscompiler_busybox_sbin_callback()
	{
		# libselinux depends on libpcre
		local -r prceRelativeInstallPath="$(dependencyPath pcre)"/install
		local -r prceAbsoluteInstallPath="${LFS}${prceRelativeInstallPath}"
	
		# busybox selinux functionality
		local -r selinuxRelativeInstallPath="$(dependencyPath selinux)"/install
		local -r selinuxAbsoluteInstallPath="${LFS}${selinuxRelativeInstallPath}"
	
		package_crosscompiler_busybox_setQuotedBusyboxConfigurationParameter EXTRA_CFLAGS "-I${selinuxAbsoluteInstallPath}/usr/include"
		package_crosscompiler_busybox_setQuotedBusyboxConfigurationParameter EXTRA_LDFLAGS "-L${selinuxAbsoluteInstallPath}/usr/lib -L${prceAbsoluteInstallPath}/lib"
		package_crosscompiler_busybox_setQuotedBusyboxConfigurationParameter EXTRA_LDLIBS "pcre sepol selinux"
	}
	
	package_crosscompiler_busybox_build "sbin" sbin package_crosscompiler_busybox_sbin_callback
}
