set -o errexit +o hashall

version 1.2.8
{
	source_package ZLIB "$LFS_RECIPE_NAME"-"${LFS_RECIPE_VERSION["${LFS_RECIPE_NAME}"]}".tar.xz MD5:28f1205d8dd2001f26fec1e8c2cebe37
	
	depends musl-cross
}

function install_crosscompiler_zlib()
{
	pushdDependencyFolder
		
		PATH="$PATH" \
		CC="$LFS_C_TARGET_EXTERNAL_CC" \
		CFLAGS="$LFS_C_TARGET_EXTERNAL_CFLAGS" \
		AR="$LFS_C_TARGET_EXTERNAL_AR" \
		RANLIB="$LFS_C_TARGET_EXTERNAL_RANLIB" \
		NM="$LFS_C_TARGET_EXTERNAL_NM" \
		./configure \
			--prefix="$LFS_DEPENDENCY_PREFIX_PATH"
			--64
		
		$callback
		
		autotoolsConfiguredMakeWrapper
		
		autotoolsConfiguredMakeWrapper DESTDIR="$LFS" install
		
	popdDependencyFolder
	
	mv -v /usr/lib/libz.so.* /lib
	ln -sfv ../../lib/libz.so.1.2.8 /usr/lib/libz.so
}
