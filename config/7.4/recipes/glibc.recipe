set -o errexit +o hashall
addSourcePackageDownload 2.18 "$LFS_MIRROR_GNU" "$LFS_SOURCE_PACKAGE_NAME"/"$LFS_SOURCE_PACKAGE_NAME"-2.18.tar.xz MD5:88fbbceafee809e82efd52efa1e3c58f,KEYRING:gnu-keyring.gpg

function installPackage_toolchain1_glibc()
{
	if [ ! -r /usr/include/rpc/types.h ]; then
		sudo mkdir -p /usr/include/rpc
		sudo cp -v sunrpc/rpc/*.h /usr/include/rpc
	fi
	
	sed -i -e 's/static __m128i/inline &/' sysdeps/x86_64/multiarch/strstr.c
	
	createBuildFolderAndPushd
		
		../"$LFS_EXTRACTED_TARBALL_FOLDER"/configure                         \
		--prefix=/"$LFS_TOOLS"                                                   \
		--host="$LFS_TGT"                                                 \
		--build="$(../"$LFS_EXTRACTED_TARBALL_FOLDER"/scripts/config.guess)" \
		--disable-profile                                                 \
		--enable-kernel=2.6.32                                            \
		--with-headers=/"$LFS_TOOLS"/include                                     \
		libc_cv_forced_unwind=yes                                         \
		libc_cv_ctors_header=yes                                          \
		libc_cv_c_cleanup=yes
		
		make
		
		make install
		
	popdBuildFolder
	
	pwd 1>&2
	
	echo 'main(){}' >dummy.c
	"$LFS_TGT"-gcc dummy.c
	readelf -l a.out | grep ": /$LFS_TOOLS"
		# [Requesting program interpreter: /tools/lib/ld-linux.so.2]
		exit 5
	#PATH=/tools/bin:/bin:/usr/bin x86_64-lfs-linux-gnu-gcc -print-search-dirs
	#rm -f -v dummy.c a.out
}

