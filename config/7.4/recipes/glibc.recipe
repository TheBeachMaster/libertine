set +o allexport -o braceexpand +o emacs -o errexit +o errtrace +o functrace +o hashall +o histexpand +o history +o ignoreeof -o interactive-comments +o keyword +o monitor +o noclobber +o noexec +o noglob +o nolog +o notify +o nounset +o onecmd +o physical +o pipefail +o posix +o verbose +o vi +o xtrace;unset CDPATH;umask 022
addSourcePackageDownload 2.18 "$LFS_MIRROR_GNU"/"$LFS_SOURCE_PACKAGE_NAME"/"$LFS_SOURCE_PACKAGE_NAME"-2.18.tar.xz MD5:88fbbceafee809e82efd52efa1e3c58f

function installPackage_toolchain1_glibc()
{
	if [ ! -r /usr/include/rpc/types.h ]; then
		sudo mkdir -p /usr/include/rpc
		sudo cp -v sunrpc/rpc/*.h /usr/include/rpc
	fi
	
	sed -i -e 's/static __m128i/inline &/' sysdeps/x86_64/multiarch/strstr.c
	
	createBuildFolderAndPushd
		
		../"$LFS_EXTRACTED_TARBALL_FOLDER"/configure                         \
		--prefix=/"$LFS_TOOLS"                                                   \
		--host="$LFS_TGT"                                                 \
		--build="$(../"$LFS_EXTRACTED_TARBALL_FOLDER"/scripts/config.guess)" \
		--disable-profile                                                 \
		--enable-kernel=2.6.32                                            \
		--with-headers=/"$LFS_TOOLS"/include                                     \
		libc_cv_forced_unwind=yes                                         \
		libc_cv_ctors_header=yes                                          \
		libc_cv_c_cleanup=yes
		
		make
		
		make install
		
	popdBuildFolder
	
	# libstdc++ built here, as it's part of gcc
	createBuildFolderAndPushd
		
		../"$LFS_EXTRACTED_TARBALL_FOLDER"/libstdc++-v3/configure \
		--host="$LFS_TGT"                                      \
		--prefix=/"$LFS_TOOLS"                                        \
		--disable-multilib                                     \
		--disable-shared                                       \
		--disable-nls                                          \
		--disable-libstdcxx-threads                            \
		--disable-libstdcxx-pch                                \
		--with-gxx-include-dir=/"$LFS_TOOLS"/"$LFS_TGT"/include/c++/"$ourVersion"
		
		make
		
		make install
		
	popdBuildFolder
}

