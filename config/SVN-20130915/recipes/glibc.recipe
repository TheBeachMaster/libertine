addSourcePackageDownload glibc 2.18 http://ftp.gnu.org/gnu/glibc/glibc-2.18.tar.xz MD5:88fbbceafee809e82efd52efa1e3c58f xz glibc-2.18
function installPackage_toolchain1_glibc()
{
	if [ ! -r /usr/include/rpc/types.h ]; then
		sudo mkdir -p /usr/include/rpc
		sudo cp -v sunrpc/rpc/*.h /usr/include/rpc
	fi
	
	sed -i -e 's/static __m128i/inline &/' sysdeps/x86_64/multiarch/strstr.c
	
	createBuildFolderAndPushd
		
		../"$ourExtractedTarballFolder"/configure                         \
		--prefix=/"$LFS_TOOLS"                                                   \
		--host="$LFS_TGT"                                                 \
		--build="$(../"$ourExtractedTarballFolder"/scripts/config.guess)" \
		--disable-profile                                                 \
		--enable-kernel=2.6.32                                            \
		--with-headers=/"$LFS_TOOLS"/include                                     \
		libc_cv_forced_unwind=yes                                         \
		libc_cv_ctors_header=yes                                          \
		libc_cv_c_cleanup=yes
		
		make
		
		make install
		
	popdAndRemoveBuilderFolder
	
	# libstdc++ built here, as it's part of gcc
	createBuildFolderAndPushd
		
		../"$ourExtractedTarballFolder"/libstdc++-v3/configure \
		--host="$LFS_TGT"                                      \
		--prefix=/"$LFS_TOOLS"                                        \
		--disable-multilib                                     \
		--disable-shared                                       \
		--disable-nls                                          \
		--disable-libstdcxx-threads                            \
		--disable-libstdcxx-pch                                \
		--with-gxx-include-dir=/"$LFS_TOOLS"/"$LFS_TGT"/include/c++/"$ourVersion"
		
		make
		
		make install
		
	popdAndRemoveBuilderFolder
}

